<!--
TideMark
========

File: packaging/apt/README.md
Description: APT packaging notes for building and publishing TideMark Debian artifacts and static repository metadata.

Responsibility:
- Document the minimal command path for build and publish operations.

Architectural Position:
- Packaging-side operator guidance for Debian-based distribution.

Author: Silan.Hu
Email: silan.hu@u.nus.edu
Copyright (c) 2026-2027 easynet. All rights reserved.
-->

# APT Publishing Notes

This repository uses `.deb` artifacts generated by `cargo-deb`, then materializes a static APT repository tree for publishing.

## Build `.deb`
```bash
./scripts/release/build-deb.sh
```

## Build static APT repository tree
```bash
sudo apt-get install -y apt-utils dpkg-dev gnupg
./scripts/release/build-apt-repo.sh dist/<package>.deb apt-public stable main
```

## Optional: sign metadata
Import your private key before generating signed `InRelease`/`Release.gpg`:

```bash
export APT_GPG_KEY_ID="<fingerprint>"
export APT_GPG_PASSPHRASE="<passphrase>"
gpg --batch --import ./private-key.asc
./scripts/release/build-apt-repo.sh dist/<package>.deb apt-public stable main
```

## Client install example (GitHub Pages)
```bash
# Replace owner/repo and configure trusted key management in production.
echo "deb [trusted=yes] https://<owner>.github.io/<repo>/apt stable main" | sudo tee /etc/apt/sources.list.d/tidemark.list
sudo apt update
sudo apt install tidemark
```
